<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Browser - PIPER Speech Therapy</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <script>document.documentElement.className='theme-'+(localStorage.getItem('piper-theme')||'autumn');</script>
    <link rel="stylesheet" href="./src/common/components/LoadingScreen/loading-screen.css">
    <link rel="stylesheet" href="./src/styles/cards.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-snowflake">ğŸ¯</div>
            <h1 class="loading-title">Loading PIPER...</h1>
        </div>
    </div>

    <!-- Autumn Leaves Decoration -->
    <div class="snowflakes">
        <div class="snowflake">ğŸ‚</div>
        <div class="snowflake">ğŸ</div>
        <div class="snowflake">ğŸ‚</div>
        <div class="snowflake">ğŸ</div>
        <div class="snowflake">ğŸ‚</div>
        <div class="snowflake">ğŸ</div>
        <div class="snowflake">ğŸ‚</div>
        <div class="snowflake">ğŸ</div>
        <div class="snowflake">ğŸ‚</div>
        <div class="snowflake">ğŸ</div>
    </div>

    <!-- Theme Selector -->
    <div class="theme-selector-floating" id="themeSelector">
        <button class="theme-toggle-btn" id="themeToggleBtn">ğŸ¨</button>
        <div class="theme-selector-panel hidden" id="themeSelectorPanel">
            <p class="theme-selector-title">Choose Theme</p>
            <div class="theme-grid">
                <button class="theme-btn" data-theme="spring">
                    <span class="theme-icon">ğŸŒ¸</span>
                    <span class="theme-text">Spring</span>
                </button>
                <button class="theme-btn" data-theme="summer">
                    <span class="theme-icon">â˜€ï¸</span>
                    <span class="theme-text">Summer</span>
                </button>
                <button class="theme-btn active" data-theme="autumn">
                    <span class="theme-icon">ğŸ‚</span>
                    <span class="theme-text">Fall</span>
                </button>
                <button class="theme-btn" data-theme="winter">
                    <span class="theme-icon">â„</span>
                    <span class="theme-text">Winter</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="browser-header">
        <div class="header-content">
            <div class="header-text">
                <h1 class="header-title">Card Browser</h1>
                <p class="header-subtitle">Browse and preview all deck cards</p>
            </div>
            <div class="header-search">
                <input type="text" id="searchInput" placeholder="Search categories...">
            </div>
        </div>
    </header>

    <!-- Filter Bar -->
    <div class="filter-bar">
        <div class="filter-content">
            <div class="filter-group">
                <label for="dataTypeFilter">Data Type:</label>
                <select id="dataTypeFilter">
                    <option value="all" selected>All Categories</option>
                    <option value="language">Language</option>
                    <option value="articulation">Articulation</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="handlerFilter">Filter by Handler:</label>
                <select id="handlerFilter">
                    <option value="all">All Handlers</option>
                    <option value="single-answer">Single Answer</option>
                    <option value="multiple-answers">Multiple Answers</option>
                    <option value="multiple-choice">Multiple Choice</option>
                    <option value="image-selection">Image Selection</option>
                    <option value="sequencing">Sequencing</option>
                    <option value="building">Building</option>
                    <option value="conditional">Conditional</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="sourceFileFilter">Source File:</label>
                <select id="sourceFileFilter">
                    <option value="all">All Files</option>
                </select>
            </div>
            <div class="stats-display">
                <span id="categoryCount">0 categories</span>
                <span id="cardCount">0 cards</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="browser-main">
        <div class="browser-content">
            <!-- Handler Sections will be dynamically generated -->
            <div id="handlerSections" class="handler-sections">
            </div>
        </div>
    </main>

    <!-- Card Preview Modal -->
    <div id="cardPreviewModal" class="preview-modal hidden">
        <div class="preview-backdrop"></div>
        <div class="preview-container">
            <div class="preview-header">
                <h2 id="previewCategoryTitle">Category Name</h2>
                <button class="preview-close-btn" id="previewCloseBtn">&times;</button>
            </div>
            <div class="preview-navigation">
                <button class="preview-nav-btn" id="prevCardBtn">â† Prev</button>
                <span class="preview-card-counter" id="cardCounter">1 / 10</span>
                <button class="preview-nav-btn" id="nextCardBtn">Next â†’</button>
            </div>
            <div class="preview-card-container" id="previewCardContent">
                <!-- Card content will be rendered here -->
            </div>
            <div class="preview-card-info" id="previewCardInfo">
                <!-- Handler type, raw JSON -->
            </div>
        </div>
    </div>

    <!-- Vite Entry Point -->
    <script type="module" src="./src/features/cards/index.ts"></script>
</body>
</html>
